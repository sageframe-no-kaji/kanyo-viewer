services:
  viewer:
    build: .
    container_name: kanyo-viewer
    ports:
      - "3000:3000"
    volumes:
      # Mount clip directories read-only from detection containers
      - /opt/services/kanyo-harvard:/data/harvard:ro
      - /opt/services/kanyo-nsw:/data/nsw:ro
    environment:
      - KANYO_ENV=production
      - ADMIN_API_URL=http://172.17.0.1:8080
    restart: unless-stopped
    extra_hosts:
      - "host.docker.internal:host-gateway"
    networks:
      - kanyo-network

networks:
  kanyo-network:
    driver: bridge
